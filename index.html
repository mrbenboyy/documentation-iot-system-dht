<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IoT Project Documentation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        html {
            font-family: 'Poppins', sans-serif;
            scroll-behavior: smooth;
        }

        img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
            transition: transform 0.3s ease;
        }

        img:hover {
            transform: scale(1.05);
        }

        pre {
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
            background-color: #f3f4f6;
            padding: 1rem;
            border-radius: 0.5rem;
            border-left: 4px solid #3b82f6;
        }

        .sidebar-link {
            transition: all 0.3s ease;
        }

        .sidebar-link:hover {
            background-color: #374151;
            transform: translateX(5px);
        }

        .section-title {
            position: relative;
            display: inline-block;
        }

        .section-title::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 3px;
            background-color: #3b82f6;
            bottom: -5px;
            left: 0;
            transform: scaleX(0);
            transform-origin: bottom right;
            transition: transform 0.3s ease;
        }

        .section-title:hover::after {
            transform: scaleX(1);
            transform-origin: bottom left;
        }

        .card {
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .logo {
            width: 150px;
            height: 150px;
        }
    </style>
</head>

<body class="bg-gray-100 text-gray-900">
    <div class="flex">
        <!-- Sidebar -->
        <aside class="w-64 bg-black text-white h-screen fixed">
            <div class="p-4">
                <img src="hakim_bot.png" alt="Project Logo" class="logo animate__animated animate__fadeIn">
            </div>
            <nav class="mt-4">
                <ul>
                    <li>
                        <a href="#introduction"
                            class="flex items-center p-3 hover:bg-gray-700 transition sidebar-link animate__animated animate__fadeInLeft animate__delay-1s">
                            <i class="fas fa-info-circle mr-3"></i> Introduction
                        </a>
                    </li>
                    <li>
                        <a href="#project-structure"
                            class="flex items-center p-3 hover:bg-gray-700 transition sidebar-link animate__animated animate__fadeInLeft animate__delay-2s">
                            <i class="fas fa-folder-tree mr-3"></i> Project Structure
                        </a>
                    </li>
                    <li>
                        <a href="#setup"
                            class="flex items-center p-3 hover:bg-gray-700 transition sidebar-link animate__animated animate__fadeInLeft animate__delay-3s">
                            <i class="fas fa-tools mr-3"></i> Setup
                        </a>
                    </li>
                    <li>
                        <a href="#mosquitto"
                            class="flex items-center p-3 hover:bg-gray-700 transition sidebar-link animate__animated animate__fadeInLeft animate__delay-4s">
                            <i class="fas fa-server mr-3"></i> Mosquitto
                        </a>
                    </li>
                    <li>
                        <a href="#influxdb"
                            class="flex items-center p-3 hover:bg-gray-700 transition sidebar-link animate__animated animate__fadeInLeft animate__delay-5s">
                            <i class="fas fa-database mr-3"></i> InfluxDB
                        </a>
                    </li>
                    <li>
                        <a href="#grafana"
                            class="flex items-center p-3 hover:bg-gray-700 transition sidebar-link animate__animated animate__fadeInLeft animate__delay-5s">
                            <i class="fas fa-chart-line mr-3"></i> Grafana
                        </a>
                    </li>
                    <li>
                        <a href="#node-red"
                            class="flex items-center p-3 hover:bg-gray-700 transition sidebar-link animate__animated animate__fadeInLeft animate__delay-5s">
                            <i class="fab fa-node-js mr-3"></i> Node-RED
                        </a>
                    </li>
                    <li>
                        <a href="#docker"
                            class="flex items-center p-3 hover:bg-gray-700 transition sidebar-link animate__animated animate__fadeInLeft animate__delay-5s">
                            <i class="fab fa-docker mr-3"></i> Docker
                        </a>
                    </li>
                    <li>
                        <a href="#usage"
                            class="flex items-center p-3 hover:bg-gray-700 transition sidebar-link animate__animated animate__fadeInLeft animate__delay-5s">
                            <i class="fas fa-play-circle mr-3"></i> Usage
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="ml-64 p-8 w-full">
            <!-- Introduction -->
            <section id="introduction" class="mb-12 animate__animated animate__fadeIn">
                <h2 class="text-3xl font-extrabold mb-6 section-title">Introduction</h2>
                <p class="mb-6">This IoT project illustrates how to monitor temperature and humidity using a simulated
                    sensor setup. Key components include:</p>

                <!-- Card Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-* gap-5">
                    <!-- Python Card -->
                    <div class="card p-6 text-center hover:shadow-lg transition-shadow duration-300">
                        <img src="python_logo.png" alt="Python" class="h-12 w-12 mx-auto mb-4">
                        <h3 class="text-xl font-semibold mb-2">Python</h3>
                        <p class="text-gray-600">Used for simulating sensor data and sending it to the MQTT broker.</p>
                    </div>

                    <!-- MQTT Card -->
                    <div class="card p-6 text-center hover:shadow-lg transition-shadow duration-300">
                        <img src="mosquitto_logo.png" alt="MQTT" class="h-12 w-12 mx-auto mb-4">
                        <h3 class="text-xl font-semibold mb-2">Mosquitto MQTT</h3>
                        <p class="text-gray-600">Acts as the MQTT broker for handling real-time data transmission.</p>
                    </div>

                    <!-- InfluxDB Card -->
                    <div class="card p-6 text-center hover:shadow-lg transition-shadow duration-300">
                        <img src="influxdb_logo.png" alt="InfluxDB" class="h-12 w-12 mx-auto mb-4">
                        <h3 class="text-xl font-semibold mb-2">InfluxDB</h3>
                        <p class="text-gray-600">Stores time-series data collected from the sensors.</p>
                    </div>

                    <!-- Grafana Card -->
                    <div class="card p-6 text-center hover:shadow-lg transition-shadow duration-300">
                        <img src="grafana_logo.png" alt="Grafana" class="h-12 w-12 mx-auto mb-4">
                        <h3 class="text-xl font-semibold mb-2">Grafana</h3>
                        <p class="text-gray-600">Visualizes the sensor data with interactive dashboards.</p>
                    </div>

                    <!-- Docker Card -->
                    <div class="card p-6 text-center hover:shadow-lg transition-shadow duration-300">
                        <img src="docker_logo.png" alt="Docker" class="h-12 w-12 mx-auto mb-4">
                        <h3 class="text-xl font-semibold mb-2">Docker</h3>
                        <p class="text-gray-600">Manages containers for Mosquitto, InfluxDB, and Grafana, ensuring
                            seamless deployment and integration.</p>
                    </div>
                </div>

                <p class="mt-8">This Dockerized project ensures seamless deployment and integration of all services.</p>
            </section>

            <!-- Project Structure -->
            <section id="project-structure" class="mb-12 animate__animated animate__fadeIn">
                <h2 class="text-3xl font-extrabold mb-6 section-title">Project Structure</h2>
                <div class="bg-gray-100 border-l-4 border-blue-500 p-4 rounded shadow card">
                    <pre><code>
Projet_IoT/
├── python_sensor/
│   └── dht_sensor.py
├── docker_config/
│   ├── mosquitto/
│   │   ├── config/
│   │   │   └── mosquitto.conf
│   │   ├── data/
│   │   └── log/
│   ├── influxdb/
│   │   └── data/
│   ├── grafana/
│   │   └── data/
│   └── docker-compose.yml
├── node-red_flows/
    └── flows.json
                    </code></pre>
                </div>
                <p class="mt-4">Each directory has specific responsibilities, from sensor scripts to Docker
                    configurations.</p>
            </section>

            <!-- Setup -->
            <section id="setup" class="mb-12 animate__animated animate__fadeIn">
                <h2 class="text-3xl font-extrabold mb-6 section-title">Setup</h2>
                <ol class="list-decimal pl-6 space-y-2">
                    <li>Clone the repository.</li>
                    <pre>git clone https://github.com/mrbenboyy/IoT-monitor-temperature-humidity.git</pre>
                    <li>Ensure Docker and Docker Compose are installed.</li>
                    <li>Run <code class="bg-gray-100 px-2 py-1 rounded">docker-compose up -d</code>.</li>
                </ol>
                <img src="docker_containers.PNG" alt="Docker Setup" class="mt-6 rounded-lg shadow-lg card">
                <p class="mt-4">This will start the Mosquitto, InfluxDB, and Grafana services.</p>
            </section>

            <!-- Mosquitto Section -->
            <section id="mosquitto" class="mb-12 animate__animated animate__fadeIn">
                <h2 class="text-3xl font-extrabold mb-6 section-title">Mosquitto</h2>
                <p class="mb-4">The MQTT broker configuration is available in <code>mosquitto.conf</code>. It is
                    configured to allow anonymous connections.</p>
                <pre class="bg-gray-100 p-4 rounded shadow"><code>
listener 1883
allow_anonymous true
                </code></pre>
            </section>

            <!-- InfluxDB Section -->
            <section id="influxdb" class="mb-12 animate__animated animate__fadeIn">
                <h2 class="text-3xl font-extrabold mb-6 section-title">InfluxDB</h2>
                <p class="mb-4">InfluxDB is configured with the following environment variables in the
                    <code>docker-compose.yml</code> file:
                </p>
                <pre class="bg-gray-100 p-4 rounded shadow"><code>
DOCKER_INFLUXDB_INIT_MODE=setup
DOCKER_INFLUXDB_INIT_USERNAME=abdelhakim_benbouanane
DOCKER_INFLUXDB_INIT_PASSWORD=hakim123@
DOCKER_INFLUXDB_INIT_ORG=IoT_Mundia
DOCKER_INFLUXDB_INIT_BUCKET=mybucket
</code></pre><br />
                <p class="mb-4">the credentials are:
                </p>
                <pre class="bg-gray-100 p-4 rounded shadow"><code>
Username: abdelhakim_benbouanane
Password: hakim123@
</code></pre><br />
                <img src="influxdb_data_explorer.png" alt="InfluxDB Data Explorer"
                    class="rounded-lg shadow-lg card"><br />
            </section>

            <!-- Grafana Section -->
            <section id="grafana" class="mb-12 animate__animated animate__fadeIn">
                <h2 class="text-3xl font-extrabold mb-6 section-title">Grafana</h2>
                <p class="mb-4">Grafana is configured to connect to InfluxDB. Use the following settings:</p>
                <pre class="bg-gray-100 p-4 rounded shadow"><code>
URL: http://influxdb:8086
Organization: IoT_Mundia
Token: admin:admin123
Bucket: mybucket
                </code></pre><br />
                <img src="grafana_connection.png" alt="Grafana Connection" class="rounded-lg shadow-lg card">
            </section>

            <!-- Node-RED -->
            <section id="node-red" class="mb-12 animate__animated animate__fadeIn">
                <h2 class="text-3xl font-extrabold mb-6 section-title">Node-RED</h2>
                <p class="mb-4">Node-RED manages data flow and stores processed data in InfluxDB.</p>
                <h3 class="text-2xl font-bold mb-4">Flow Overview</h3>
                <p class="mb-4">The Node-RED flow consists of the following steps:</p>
                <ol class="list-decimal pl-6 space-y-2">
                    <li><strong>MQTT Input</strong>: Receives data from the MQTT broker on the topic
                        <code>sensor/data</code>.
                    </li>
                    <li><strong>Parse Data</strong>: Parses the incoming payload (temperature and humidity) into a JSON
                        object.</li>
                    <li><strong>InfluxDB Output</strong>: Stores the parsed data in InfluxDB under the measurement
                        <code>sensor_data</code>.
                    </li>
                </ol><br />
                <img src="node-red_flux.png" alt="Node-RED Flow" class="rounded-lg shadow-lg card"><br />
                <p class="mt-4">Here is the JSON representation of the Node-RED flow:</p>
                <pre class="bg-gray-100 p-4 rounded shadow"><code>
[
    {
        "id": "f1b1c1a0.1b1b1",
        "type": "mqtt in",
        "z": "d1b1c1a0.1b1b1",
        "name": "",
        "topic": "sensor/data",
        "qos": "0",
        "datatype": "auto",
        "broker": "b1b1c1a0.1b1b1",
        "x": 150,
        "y": 100,
        "wires": [
            [
                "f2b1c1a0.1b1b1"
            ]
        ]
    },
    {
        "id": "f2b1c1a0.1b1b1",
        "type": "function",
        "z": "d1b1c1a0.1b1b1",
        "name": "Parse Data",
        "func": "var parts = msg.payload.split(',');\nvar temperature = parseFloat(parts[0].split(':')[1]);\nvar humidity = parseFloat(parts[1].split(':')[1]);\nmsg.payload = {\n    temperature: temperature,\n    humidity: humidity\n};\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 350,
        "y": 100,
        "wires": [
            [
                "f3b1c1a0.1b1b1"
            ]
        ]
    },
    {
        "id": "f3b1c1a0.1b1b1",
        "type": "influxdb out",
        "z": "d1b1c1a0.1b1b1",
        "influxdb": "c1b1c1a0.1b1b1",
        "name": "",
        "measurement": "sensor_data",
        "x": 550,
        "y": 100,
        "wires": []
    }
]
                </code></pre>
                <p class="mt-4">This flow ensures that the sensor data is correctly processed and stored for
                    visualization in Grafana.</p>
            </section>

            <!-- Docker Section -->
            <section id="docker" class="mb-12 animate__animated animate__fadeIn">
                <h2 class="text-3xl font-extrabold mb-6 section-title">Docker</h2>
                <p class="mb-4">
                    Docker is a platform that allows you to package applications and their dependencies into
                    lightweight, portable containers.
                    In this project, Docker is used to containerize the following services:
                </p>
                <ul class="list-disc pl-6 mb-6">
                    <li><strong>Mosquitto</strong>: The MQTT broker for real-time data transmission.</li>
                    <li><strong>InfluxDB</strong>: The time-series database for storing sensor data.</li>
                    <li><strong>Grafana</strong>: The visualization tool for creating interactive dashboards.</li>
                </ul>

                <h3 class="text-2xl font-bold mb-4">Why Use Docker?</h3>
                <p class="mb-4">
                    Docker simplifies the deployment process by ensuring that all services run in isolated environments
                    with their dependencies.
                    This eliminates the "it works on my machine" problem and ensures consistency across different
                    environments.
                </p>

                <h3 class="text-2xl font-bold mb-4">docker-compose.yml</h3>
                <p class="mb-4">
                    The <code>docker-compose.yml</code> file defines the services (containers) that Docker will manage.
                    Below is an explanation of the services:
                </p>
                <pre class="bg-gray-100 p-4 rounded shadow"><code>
services:
  mosquitto:
    image: eclipse-mosquitto:latest  # Mosquitto MQTT broker image
    ports:
      - "1883:1883"  # Exposes port 1883 for MQTT communication
    volumes:
      - ./mosquitto/config:/mosquitto/config  # Mounts config files
      - ./mosquitto/data:/mosquitto/data      # Mounts data storage
      - ./mosquitto/log:/mosquitto/log        # Mounts log files
    networks:
      - iot_network  # Connects to the IoT network

  influxdb:
    image: influxdb:latest  # InfluxDB time-series database image
    ports:
      - "8086:8086"  # Exposes port 8086 for InfluxDB access
    volumes:
      - ./influxdb/data:/var/lib/influxdb2  # Mounts data storage
    environment:
      - DOCKER_INFLUXDB_INIT_MODE=setup  # Initializes InfluxDB
      - DOCKER_INFLUXDB_INIT_USERNAME=abdelhakim_benbouanane  # Admin username
      - DOCKER_INFLUXDB_INIT_PASSWORD=hakim123@  # Admin password
      - DOCKER_INFLUXDB_INIT_ORG=IoT_Mundia  # Organization name
      - DOCKER_INFLUXDB_INIT_BUCKET=mybucket  # Default bucket for data
    networks:
      - iot_network  # Connects to the IoT network

  grafana:
    image: grafana/grafana:latest  # Grafana visualization tool image
    ports:
      - "3000:3000"  # Exposes port 3000 for Grafana access
    volumes:
      - ./grafana/data:/var/lib/grafana  # Mounts data storage
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=admin  # Sets Grafana admin password
    networks:
      - iot_network  # Connects to the IoT network

networks:
  iot_network:
    driver: bridge  # Creates a bridge network for communication between containers
                </code></pre>
                <p class="mt-4">
                    This configuration ensures that all services are connected to the same network
                    (<code>iot_network</code>) and can communicate with each other seamlessly.
                </p>
            </section>

            <!-- Usage -->
            <section id="usage" class="mb-12 animate__animated animate__fadeIn">
                <h2 class="text-3xl font-extrabold mb-6 section-title">Usage</h2>
                <p class="mb-4">Once the services are running, you can start sending simulated sensor data using the
                    Python script:</p>
                <pre class="bg-gray-100 p-4 rounded shadow"><code>
import random
import time
import paho.mqtt.client as mqtt

broker = "localhost"
port = 1883
topic = "sensor/data"

client = mqtt.Client()
client.connect(broker, port)

while True:
    temperature = random.uniform(20.0, 30.0)
    humidity = random.uniform(50.0, 60.0)
    payload = f"temperature:{temperature},humidity:{humidity}"
    client.publish(topic, payload)
    print(f"Published: {payload}")
    time.sleep(5)
                </code></pre><br />
                <img src="python_script.png" alt="Python Script" class="rounded-lg shadow-lg card"><br />
                <p class="mt-4">The data will be sent to the MQTT broker, processed by Node-RED, stored in InfluxDB, and
                    visualized in Grafana.</p><br />
                <img src="dashboard.png" alt="Grafana Dashboard" class="rounded-lg shadow-lg card"><br />
                <img src="dashboard_gauge.png" alt="Grafana Dashboard" class="rounded-lg shadow-lg card">
            </section>
        </main>
    </div>
</body>

</html>